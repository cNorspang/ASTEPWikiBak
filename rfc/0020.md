---
title: RFC 0020
description: Transportation Network Model
published: true
date: 2021-09-30T14:13:26.689Z
tags: 
editor: undefined
---

# 0020 - Transportation Network Model
**Pending**

*Proposed: 23. Sep. 2021* | *state: 29. Sep. 2021* | *Last Modification: 29. Sep. 2021*

## Summary

A general model for a traffic network, in which multiple microservices can be connected to it in a specified pipeline, where each microservices has the model as an I/O.
Is primarily structured around a standardised schema which describes the model, and a description of the different types of microservices which can be developed to use the schema.
The Transporation Network is basically a weighted graph, where each node and edge has a weight and some data connected.

## Motivation

A general model for a Transporation Network makes it possible for multiple groups to work together with a unified objective, while still maintaining the autonomous development that each group has.
Each microservice enhances the Transportation Network by itself, while the new microservice can be used in conjunction with all the other microservices, making it highly scaleable.
A concrete example would be a microservice that makes the model with data from the database, then three microservices give different weights depending on environmental driving, traffic and (only) shortest distance, which then by the end is fed into a microservice that finds the shortest path based on weights.

## Details

### The Objective
The objective is to describe a JSON schema which can be used as I/O of all microservices working with Transportation Network Model.

To do this, 7 different topics together form the basis of the Transportation Network Model, which is:
- [Component Diagram](#component-diagram)
- [The Format](#the-format)
- [Normalization of Weights](#normalization-of-weights)
- [Types of Microservices](#types-of-microservices)
- [The data Attribute](#the-data-attribute)
- [Error Handling](#error-handling)
- [Integrating a valid service](#integrating-a-valid-service)

### Component Diagram
INSERT DIAGRAM WHEN MADE AND GIVE OVERARCHING DESCRIPTION OF WORKFLOW

### The Format
The format of the Transportation Network Model is a JSON model suited for being sent and received via http requests, controlled by the UI Controller.

```json
GET / info
output: {
	error_list = [
  	{
    	service: string,			(name of service registering the error)
      node: string					(node id where its wrong, null if not a node error),
      description: string,
    },
    ...
  ],
  meta_data = {
  	priority: float  				(0-1)
  }
  vehicle: {
  	id: string
    data: {
    	EMPTY SO FAR
    }
  }
  nodes = [
  	{
    	id: string
      weight: float 				(0-1)
      data: {
      	EMPTY SO FAR
      }
      edges: [
      	id: string					(node id which this edge goes to)
        weight:	float  			(0-1)
        data: {
        	EMPTY SO FAR
        },
        ...
      ]
    },
    ...
  ]
}
```

In the format, the parenthesis describes if the attribute is constrained to be some specific value or should be inside some range.
Also, the syntax ... signifies that the list can contain an indefinete amount of objects following the given schema.

The `vehicle` object signifies the object being simulated to be on the road.
The `nodes` list, is a list of individual nodes, signifying unique GPS coordinates on a map, typically intersections where roads meet.
The `edges` list, inside the nodes, signify the roads which goes from the node containing the road to another node, signified by the id.

This design has been chosen, since then all nodes contains each of its edges going outward (the right side of the road), whereas all ingoing edges (roads) are contained in other nodes. This reduces the duplication of data, and also takes into account that sometimes the right side of the road is filled by traffic, while the other side of the road might be completely free.

The details of what the other different attributes mean, is described in the following topics.
- `error_list` is described in [Error Handling](#error-handling)
- `meta_data` and `data` is described in [The data Attribute](#the-data-attribute)
- `weight` is described in [Normalization of Weights](#normalization-of-weights)

### Normalization of Weights
TO DO BY NORMALIZER GROUP

### Types of Microservices
Each microservice that wants to abide to the Transport Network Model interface has to uphold some general criteria and some specific criteria, based on which type of microservice it is, abiding by the rule that a microservice must do only one thing, but do it well.

The (current) different types of microservices are.
- Creator
- Trimmer
- Expector
- Weighter
- Comparer
- Router

At the end of this section, there is detailed how new types of microservices can be added to the UI controller which calls the different microservices.

#### General Criteria
These are the criteria all valid microservices must use, who wants to use this Transportation Network Model.
- Each service must implement an Adapter inside each service, which has two functions, to_json(internal_rep) and from_json(model_schema) (naming may also be camelCase or PascalCase dependent on implementation language).
- from_json(model_schema) should be the first process run by the service, which deserializes the model_schema, which it receives from the UI Controller when called, into some internal representation (internal_rep)
- to_json() should be the last process run by the service before returning the model back to the UI Controller, which seriailizes the internal representation into a valid Transportation Network Model schema.
- The internal representation may be as different and chaotic as necessary, but when serialized into a valid schema, all restrictions presented in [The Format](#the-format) and [Normalization of Weights](#normalization-of-weights) must be upheld.

### The data Attribute
TO DO BY CREATOR GROUP

### Error Handling
TO DO WHEN STANDARDISED
Current suggestion: List of error objects, where an error object contains what microservice created the error, and a description of what the error is.

### Integrating a valid service
TO DO BY CONTROLLER GROUP

## Alternatives

TO DO